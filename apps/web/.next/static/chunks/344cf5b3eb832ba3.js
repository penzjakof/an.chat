(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81612,e=>{"use strict";e.s(["default",()=>l]);var s=e.i(43476),t=e.i(18566),a=e.i(71645),r=e.i(63267);function l(){let e=(0,t.useRouter)(),[l,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(null);async function d(s){s.preventDefault(),u(null);try{var t;let s=window.location.origin,a=await fetch(s+"/api/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:l,password:o})});if(!a.ok)throw Error("Невірні дані");let{accessToken:n}=await a.json(),i=function(e){try{let[,s]=e.split(".");return JSON.parse(atob(s))}catch(e){return{}}}(n),c="OWNER"===i.role?"OWNER":"OPERATOR",u={accessToken:n,agencyCode:null!=(t=i.agencyCode)?t:"",role:c,operatorCode:i.operatorCode,userId:i.sub};(0,r.setSession)(u),e.push("OWNER"===u.role?"/owner":"/dashboard")}catch(e){u(e instanceof Error?e.message:"Помилка входу")}}return(0,s.jsxs)("div",{className:"max-w-sm mx-auto p-6 space-y-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"Вхід"}),(0,s.jsxs)("form",{onSubmit:d,className:"space-y-3",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Username"}),(0,s.jsx)("input",{className:"border rounded px-2 py-1 w-full",value:l,onChange:e=>n(e.target.value)})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Пароль"}),(0,s.jsx)("input",{type:"password",className:"border rounded px-2 py-1 w-full",value:o,onChange:e=>i(e.target.value)})]}),c&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:c}),(0,s.jsx)("button",{className:"bg-primary text-white px-3 py-1 rounded w-full",type:"submit",children:"Увійти"})]})]})}}]);