(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94108,e=>{"use strict";e.s(["apiDelete",()=>c,"apiGet",()=>r,"apiPost",()=>n,"apiPut",()=>i]);var t=e.i(63267);let s=window.location.origin;async function a(e,s){if(401===e.status)throw console.error("üö® API 401 Unauthorized:",s),console.error("üîë Current token:",(0,t.getAccessToken)()?"Present":"Missing"),(0,t.clearSession)(),console.error("üîÑ Redirecting to login..."),window.location.href="/login",Error("Unauthorized");if(!e.ok)try{let t=(await e.json()).message||"".concat(e.status," ").concat(s);throw Error(t)}catch(t){throw Error("".concat(e.status," ").concat(s))}return e.json()}async function o(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={...function(){let e=(0,t.getAccessToken)();return e?{Authorization:"Bearer ".concat(e)}:{}}(),...o.body?{"content-type":"application/json"}:{},...o.headers},n=e.startsWith("/api")?e:e.startsWith("/")?"/api".concat(e):"/api/".concat(e),i=(o.method||"GET").toUpperCase(),c="POST"===i&&(e.includes("/api/gallery/photo-statuses")||e.includes("/api/gallery/video-statuses")||e.includes("/api/gallery/audio-statuses")),l="GET"===i||c?3:0,d=0;for(;;){let t=await fetch("".concat(s).concat(n),{...o,headers:r,cache:"no-store"});if(429===t.status&&d<l){d+=1;let e=t.headers.get("Retry-After"),s=0;if(e){let t=Number(e);s=Number.isFinite(t)?1e3*t:0}0===s&&(s=500*Math.pow(2,d-1)+Math.floor(200*Math.random())),await function(e){return new Promise(t=>setTimeout(t,e))}(s);continue}return a(t,e)}}async function r(e,t){return o(t?"".concat(e,"?").concat(new URLSearchParams(t).toString()):e,{method:"GET"})}async function n(e,t){return o(e,{method:"POST",body:JSON.stringify(t)})}async function i(e,t){return o(e,{method:"PUT",body:JSON.stringify(t)})}async function c(e){return o(e,{method:"DELETE"})}},13601,e=>{"use strict";e.s(["Header",()=>o]);var t=e.i(43476),s=e.i(18566),a=e.i(63267);function o(e){let{title:o,showHomeButton:r=!1,showChatsButton:n=!1,showSettingsButton:i=!1,showEndShiftButton:c=!1,showLogoutButton:l=!1,showBackButton:d=!1,isActive:u=!1,currentPath:h="",onEndShift:x}=e,p=(0,s.useRouter)();return(0,t.jsxs)("header",{className:"h-12 bg-white border-b border-gray-200 flex items-center px-4 gap-4 flex-shrink-0",children:[(0,t.jsx)("div",{className:"font-bold text-xl text-[#680098] mr-4",children:o||"AnChat"}),d&&(0,t.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100",title:"–ù–∞–∑–∞–¥",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500",children:"–ù–∞–∑–∞–¥"})]}),r&&(0,t.jsxs)("button",{onClick:()=>p.push("/dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ".concat("/dashboard"===h?"bg-blue-50 text-blue-700":""),title:"–ù–∞ –¥–∞—à–±–æ—Ä–¥",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat("/dashboard"===h?"text-blue-600":"text-gray-700"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),(0,t.jsx)("span",{className:"text-[14px] ".concat("/dashboard"===h?"text-blue-700 font-medium":"text-gray-500"),children:"–î–∞—à–±–æ—Ä–¥"})]}),n&&(0,t.jsxs)("button",{onClick:()=>p.push("/chats"),className:"flex items-center gap-2 px-3 py-2 rounded ".concat(!u?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"," ").concat((null==h?void 0:h.includes("/chats"))?"bg-blue-50 text-blue-700":""),title:u?"–ß–∞—Ç–∏":"–ü–æ—á–Ω—ñ—Ç—å –∑–º—ñ–Ω—É —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø",disabled:!u,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat((null==h?void 0:h.includes("/chats"))?"text-blue-600":"text-gray-700"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),(0,t.jsx)("span",{className:"text-[14px] ".concat((null==h?void 0:h.includes("/chats"))?"text-blue-700 font-medium":"text-gray-500"),children:"–ß–∞—Ç–∏"})]}),i&&(0,t.jsxs)("button",{onClick:()=>p.push("/settings"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ".concat("/settings"===h?"bg-blue-50 text-blue-700":""),title:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat("/settings"===h?"text-blue-600":"text-gray-700"),children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.165.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.506.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.108 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.939-1.11.939h-1.094c-.55 0-1.019-.397-1.11-.94l-.148-.893c-.071-.425-.383-.763-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.939-.56-.939-1.109v-1.094c0-.55.397-1.019.94-1.11l.894-.149c.424-.07.763-.383.929-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,t.jsx)("span",{className:"text-[14px] ".concat("/settings"===h?"text-blue-700 font-medium":"text-gray-500"),children:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"})]}),c&&"/dashboard"!==h&&(0,t.jsxs)("button",{onClick:x,className:"group flex items-center gap-2 px-3 py-2 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É",disabled:!u,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,className:"w-5 h-5 text-gray-700 group-hover:text-red-600 group-hover:fill-red-600 transition-all border border-gray-400 rounded group-hover:border-red-600",fill:"none",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500 group-hover:text-red-500 transition-colors",children:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏"})]}),l&&(0,t.jsxs)("button",{onClick:()=>{(0,a.clearSession)(),p.push("/login")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ml-auto",title:"–í–∏–π—Ç–∏",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500",children:"–í–∏–π—Ç–∏"})]})]})}},93456,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),o=e.i(63267),r=e.i(94108),n=e.i(91610),i=e.i(13601);function c(){let e=(0,a.useRouter)(),{showToast:c}=(0,n.useToast)(),[l,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[x,p]=(0,s.useState)(null),[g,m]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[w,f]=(0,s.useState)(!1);async function v(){try{h(!0);let[e,t]=await Promise.all([(0,r.apiGet)("/api/shifts/is-active"),(0,r.apiGet)("/api/shifts/groups-status")]);f(!!(null==e?void 0:e.active)),d(t)}catch(e){p("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥—Ä—É–ø–∏")}finally{h(!1)}}async function j(){try{m(!0);let t=await (0,r.apiGet)("/api/shifts/can-start");if(!t.canStart){let e="–î–µ—è–∫—ñ –≥—Ä—É–ø–∏ –∑–∞–π–Ω—è—Ç—ñ: "+t.busyGroups.map(e=>e.name).join(", ");p(e),c({messageId:"",type:"error",message:e});return}await (0,r.apiPost)("/api/shifts/start",{}),c({messageId:"",type:"info",message:"–ó–º—ñ–Ω—É —Ä–æ–∑–ø–æ—á–∞—Ç–æ"}),e.push("/chats")}catch(e){p("–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É"),c({messageId:"",type:"error",message:"–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É"})}finally{m(!1)}}async function N(){try{b(!0),await (0,r.apiPost)("/api/shifts/end",{}),c({messageId:"",type:"info",message:"–ó–º—ñ–Ω—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ"}),f(!1),v()}catch(e){c({messageId:"",type:"error",message:"–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É"})}finally{b(!1)}}(0,s.useEffect)(()=>(0,o.getSession)()?"OWNER"===(0,o.getRole)()?void e.push("/owner"):void v():void e.push("/login"),[e]);let k=l.some(e=>e.busy);return u?(0,t.jsx)("div",{className:"p-6",children:"–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..."}):(0,t.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,t.jsx)(i.Header,{showHomeButton:!0,showChatsButton:!0,showSettingsButton:!0,showEndShiftButton:!0,showLogoutButton:!0,isActive:w,currentPath:"/dashboard",onEndShift:N}),(0,t.jsx)("div",{className:"flex-1 bg-white overflow-y-auto custom-scroll",children:(0,t.jsxs)("div",{className:"max-w-xl mx-auto p-6 space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"–û—Å–æ–±–∏—Å—Ç–∏–π –¥–∞—à–±–æ—Ä–¥"}),(0,t.jsx)("p",{className:"text-gray-600",children:"–í–∞—à—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –≥—Ä—É–ø–∏ —Ç–∞ —ó—Ö –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:"}),x&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:x}),(0,t.jsx)("div",{className:"border rounded divide-y",children:0===l.length?(0,t.jsx)("div",{className:"p-3 text-gray-500",children:"–ì—Ä—É–ø–∏ –Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ"}):l.map(e=>(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.busy?"–ó–∞–π–Ω—è—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º: ".concat(e.operatorName||e.operatorId):"–ì–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–±–æ—Ç–∏"})]}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.busy?"bg-red-500":"bg-green-500"),title:e.busy?"–ó–∞–π–Ω—è—Ç–∞":"–í—ñ–ª—å–Ω–∞"})]},e.id))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"bg-primary text-white px-4 py-2 rounded hover:opacity-90 disabled:opacity-50",onClick:j,disabled:k||g||w,children:"–ü–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É"}),(0,t.jsx)("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:opacity-90 disabled:opacity-50",onClick:N,disabled:!w||y,children:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É"})]})]})})]})}}]);