(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94108,e=>{"use strict";e.s(["apiDelete",()=>i,"apiGet",()=>n,"apiPost",()=>o,"apiPut",()=>l]);var t=e.i(63267);let r=window.location.origin;async function s(e,r){if(401===e.status)throw console.error("🚨 API 401 Unauthorized:",r),console.error("🔑 Current token:",(0,t.getAccessToken)()?"Present":"Missing"),(0,t.clearSession)(),console.error("🔄 Redirecting to login..."),window.location.href="/login",Error("Unauthorized");if(!e.ok)try{let t=(await e.json()).message||"".concat(e.status," ").concat(r);throw Error(t)}catch(t){throw Error("".concat(e.status," ").concat(r))}return e.json()}async function a(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={...function(){let e=(0,t.getAccessToken)();return e?{Authorization:"Bearer ".concat(e)}:{}}(),...a.body?{"content-type":"application/json"}:{},...a.headers},o=e.startsWith("/api")?e:e.startsWith("/")?"/api".concat(e):"/api/".concat(e),l=(a.method||"GET").toUpperCase(),i="POST"===l&&(e.includes("/api/gallery/photo-statuses")||e.includes("/api/gallery/video-statuses")||e.includes("/api/gallery/audio-statuses")),d="GET"===l||i?3:0,c=0;for(;;){let t=await fetch("".concat(r).concat(o),{...a,headers:n,cache:"no-store"});if(429===t.status&&c<d){c+=1;let e=t.headers.get("Retry-After"),r=0;if(e){let t=Number(e);r=Number.isFinite(t)?1e3*t:0}0===r&&(r=500*Math.pow(2,c-1)+Math.floor(200*Math.random())),await function(e){return new Promise(t=>setTimeout(t,e))}(r);continue}return s(t,e)}}async function n(e,t){return a(t?"".concat(e,"?").concat(new URLSearchParams(t).toString()):e,{method:"GET"})}async function o(e,t){return a(e,{method:"POST",body:JSON.stringify(t)})}async function l(e,t){return a(e,{method:"PUT",body:JSON.stringify(t)})}async function i(e){return a(e,{method:"DELETE"})}},13601,e=>{"use strict";e.s(["Header",()=>a]);var t=e.i(43476),r=e.i(18566),s=e.i(63267);function a(e){let{title:a,showHomeButton:n=!1,showChatsButton:o=!1,showSettingsButton:l=!1,showEndShiftButton:i=!1,showLogoutButton:d=!1,showBackButton:c=!1,isActive:p=!1,currentPath:u="",onEndShift:x}=e,h=(0,r.useRouter)();return(0,t.jsxs)("header",{className:"h-12 bg-white border-b border-gray-200 flex items-center px-4 gap-4 flex-shrink-0",children:[(0,t.jsx)("div",{className:"font-bold text-xl text-[#680098] mr-4",children:a||"AnChat"}),c&&(0,t.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100",title:"Назад",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500",children:"Назад"})]}),n&&(0,t.jsxs)("button",{onClick:()=>h.push("/dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ".concat("/dashboard"===u?"bg-blue-50 text-blue-700":""),title:"На дашборд",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat("/dashboard"===u?"text-blue-600":"text-gray-700"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),(0,t.jsx)("span",{className:"text-[14px] ".concat("/dashboard"===u?"text-blue-700 font-medium":"text-gray-500"),children:"Дашборд"})]}),o&&(0,t.jsxs)("button",{onClick:()=>h.push("/chats"),className:"flex items-center gap-2 px-3 py-2 rounded ".concat(!p?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"," ").concat((null==u?void 0:u.includes("/chats"))?"bg-blue-50 text-blue-700":""),title:p?"Чати":"Почніть зміну щоб отримати доступ",disabled:!p,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat((null==u?void 0:u.includes("/chats"))?"text-blue-600":"text-gray-700"),children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),(0,t.jsx)("span",{className:"text-[14px] ".concat((null==u?void 0:u.includes("/chats"))?"text-blue-700 font-medium":"text-gray-500"),children:"Чати"})]}),l&&(0,t.jsxs)("button",{onClick:()=>h.push("/settings"),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ".concat("/settings"===u?"bg-blue-50 text-blue-700":""),title:"Налаштування",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat("/settings"===u?"text-blue-600":"text-gray-700"),children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.165.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.506.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.108 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.939-1.11.939h-1.094c-.55 0-1.019-.397-1.11-.94l-.148-.893c-.071-.425-.383-.763-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.939-.56-.939-1.109v-1.094c0-.55.397-1.019.94-1.11l.894-.149c.424-.07.763-.383.929-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,t.jsx)("span",{className:"text-[14px] ".concat("/settings"===u?"text-blue-700 font-medium":"text-gray-500"),children:"Налаштування"})]}),i&&"/dashboard"!==u&&(0,t.jsxs)("button",{onClick:x,className:"group flex items-center gap-2 px-3 py-2 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Завершити зміну",disabled:!p,children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,className:"w-5 h-5 text-gray-700 group-hover:text-red-600 group-hover:fill-red-600 transition-all border border-gray-400 rounded group-hover:border-red-600",fill:"none",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500 group-hover:text-red-500 transition-colors",children:"Завершити"})]}),d&&(0,t.jsxs)("button",{onClick:()=>{(0,s.clearSession)(),h.push("/login")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ml-auto",title:"Вийти",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25"})}),(0,t.jsx)("span",{className:"text-[14px] text-gray-500",children:"Вийти"})]})]})}},15353,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),r=e.i(71645),s=e.i(94108),a=e.i(63267),n=e.i(18566),o=e.i(13601);let l=[{value:"TALKYTIMES",label:"TalkyTimes"}];function i(){let[e,i]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[f,k]=(0,r.useState)(null),[L,C]=(0,r.useState)(!1),[S,T]=(0,r.useState)({displayName:"",credentialLogin:"",credentialPassword:"",provider:"TALKYTIMES",groupId:""}),[P,A]=(0,r.useState)(""),M=(0,n.useRouter)(),E=(0,a.getRole)();(0,r.useEffect)(()=>{if("OWNER"!==E)return void M.replace("/login");I()},[E,M]);let I=async()=>{u(!0),h(null);try{let[e,t,r]=await Promise.all([(0,s.apiGet)("/profiles"),(0,s.apiGet)("/groups"),(0,s.apiGet)("/api/shifts/is-active")]);i(e),c(t),y(!!(null==r?void 0:r.active))}catch(e){h("Не вдалося завантажити дані"),console.error(e)}finally{u(!1)}},B=async e=>{if(e.preventDefault(),P.trim())try{let e=await (0,s.apiPost)("/groups",{name:P});c([...d,e]),T({...S,groupId:e.id}),A(""),N(!1)}catch(e){h("Помилка створення групи"),console.error(e)}},D=async e=>{e.preventDefault(),g(null),C(!0);try{await (0,s.apiPost)("/profiles",S),v(!1),T({displayName:"",credentialLogin:"",credentialPassword:"",provider:"TALKYTIMES",groupId:""}),I()}catch(t){let e=t instanceof Error?t.message:"Невідома помилка";e.includes("Не вдалось залогінитись")?g(e):(h("Помилка створення профілю"),console.error(t))}finally{C(!1)}},R=async e=>{if(e.preventDefault(),f)try{await (0,s.apiPut)("/profiles/".concat(f.id),S),k(null),T({displayName:"",credentialLogin:"",credentialPassword:"",provider:"TALKYTIMES",groupId:""}),I()}catch(e){h("Помилка оновлення профілю"),console.error(e)}},W=async e=>{if(window.confirm("Ви впевнені, що хочете видалити цей профіль?"))try{await (0,s.apiDelete)("/profiles/".concat(e)),I()}catch(e){h("Помилка видалення профілю"),console.error(e)}},q=()=>{k(null),T({displayName:"",credentialLogin:"",credentialPassword:"",provider:"TALKYTIMES",groupId:""})},O=e=>{let{name:t,value:r}=e.target;T(e=>({...e,[t]:r})),m&&g(null)};return p?(0,t.jsx)("div",{className:"p-6",children:"Завантаження..."}):x?(0,t.jsxs)("div",{className:"p-6 text-red-500",children:["Помилка: ",x]}):"OWNER"!==E?(0,t.jsx)("div",{className:"p-6 text-red-500",children:"Доступ заборонено"}):(0,t.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,t.jsx)(o.Header,{title:"Управління Профілями",showChatsButton:!0,isActive:b,currentPath:"/profiles"}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 custom-scroll",children:[(0,t.jsx)("button",{onClick:()=>v(!j),className:"bg-primary text-white px-4 py-2 rounded mb-4 hover:bg-primary-dark",children:j?"Приховати форму":"Створити новий профіль"}),j&&(0,t.jsxs)("form",{onSubmit:D,className:"bg-gray-100 p-4 rounded mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Новий Профіль"}),m&&(0,t.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,t.jsx)("strong",{children:"Помилка валідації:"})," ",m]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("select",{name:"provider",value:S.provider,onChange:O,className:"border p-2 rounded",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Оберіть платформу"}),l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,t.jsx)("input",{type:"text",name:"displayName",placeholder:"Ім'я профілю",value:S.displayName,onChange:O,className:"border p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"text",name:"credentialLogin",placeholder:"Логін",value:S.credentialLogin,onChange:O,className:"border p-2 rounded",required:!0}),(0,t.jsx)("input",{type:"password",name:"credentialPassword",placeholder:"Пароль",value:S.credentialPassword,onChange:O,className:"border p-2 rounded",required:!0}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{name:"groupId",value:S.groupId,onChange:O,className:"border p-2 rounded flex-1",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Оберіть групу"}),d.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("button",{type:"button",onClick:()=>N(!0),className:"bg-blue-500 text-white px-3 py-2 rounded hover:bg-blue-600 whitespace-nowrap",children:"Створити групу"})]})]}),(0,t.jsx)("button",{type:"submit",disabled:L,className:"px-4 py-2 rounded text-white ".concat(L?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600"),children:L?"Перевіряємо дані...":"Створити"}),(0,t.jsx)("button",{type:"button",onClick:()=>v(!1),className:"ml-2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Скасувати"})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Створити нову групу"}),(0,t.jsxs)("form",{onSubmit:B,children:[(0,t.jsx)("input",{type:"text",placeholder:"Назва групи",value:P,onChange:e=>A(e.target.value),className:"border p-2 rounded w-full mb-4",required:!0}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Створити"}),(0,t.jsx)("button",{type:"button",onClick:()=>N(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Скасувати"})]})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Ім'я"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Логін"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Статус"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Група"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Платформа"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Створено"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b",children:"Дії"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsx)("tr",{className:"hover:bg-gray-50",children:(null==f?void 0:f.id)===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:(0,t.jsx)("input",{type:"text",name:"displayName",value:S.displayName,onChange:O,className:"border p-1 rounded w-full",required:!0})}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:(0,t.jsx)("input",{type:"text",name:"credentialLogin",value:S.credentialLogin,onChange:O,className:"border p-1 rounded w-full",required:!0})}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.status}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:(0,t.jsx)("select",{name:"groupId",value:S.groupId,onChange:O,className:"border p-1 rounded w-full",required:!0,children:d.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.provider}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b",children:[(0,t.jsx)("button",{onClick:R,className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:bg-blue-600",children:"Зберегти"}),(0,t.jsx)("button",{onClick:q,className:"ml-2 bg-gray-500 text-white px-2 py-1 rounded text-sm hover:bg-gray-600",children:"Скасувати"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.displayName||"Немає"}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.credentialLogin||"Немає"}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.group.name}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:e.provider}),(0,t.jsx)("td",{className:"py-2 px-4 border-b",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b",children:[(0,t.jsx)("button",{onClick:()=>{k(e),T({displayName:e.displayName||"",credentialLogin:e.credentialLogin||"",provider:e.provider,groupId:e.group.id,credentialPassword:""})},className:"bg-yellow-500 text-white px-2 py-1 rounded text-sm hover:bg-yellow-600",children:"Редагувати"}),(0,t.jsx)("button",{onClick:()=>W(e.id),className:"ml-2 bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Видалити"})]})]})},e.id))})]})})]})]})}}]);