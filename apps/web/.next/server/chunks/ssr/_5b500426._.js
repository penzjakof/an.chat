module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},69844,a=>{"use strict";a.s(["apiDelete",()=>i,"apiGet",()=>f,"apiPost",()=>g,"apiPut",()=>h]);var b=a.i(39107);let c=process.env.NEXT_PUBLIC_API_URL??"http://localhost:4000";async function d(a,c){if(401===a.status)throw console.error("üö® API 401 Unauthorized:",c),console.error("üîë Current token:",(0,b.getAccessToken)()?"Present":"Missing"),(0,b.clearSession)(),Error("Unauthorized");if(!a.ok)try{let b=(await a.json()).message||`${a.status} ${c}`;throw Error(b)}catch{throw Error(`${a.status} ${c}`)}return a.json()}async function e(a,f={}){let g={...function(){let a=(0,b.getAccessToken)();return a?{Authorization:`Bearer ${a}`}:{}}(),...f.body?{"content-type":"application/json"}:{},...f.headers},h=a.startsWith("/api")?a:a.startsWith("/")?`/api${a}`:`/api/${a}`,i=(f.method||"GET").toUpperCase(),j="POST"===i&&(a.includes("/api/gallery/photo-statuses")||a.includes("/api/gallery/video-statuses")||a.includes("/api/gallery/audio-statuses")),k="GET"===i||j?3:0,l=0;for(;;){let b=await fetch(`${c}${h}`,{...f,headers:g,cache:"no-store"});if(429===b.status&&l<k){l+=1;let a=b.headers.get("Retry-After"),c=0;if(a){let b=Number(a);c=Number.isFinite(b)?1e3*b:0}0===c&&(c=500*Math.pow(2,l-1)+Math.floor(200*Math.random())),await function(a){return new Promise(b=>setTimeout(b,a))}(c);continue}return d(b,a)}}async function f(a,b){return e(b?`${a}?${new URLSearchParams(b).toString()}`:a,{method:"GET"})}async function g(a,b){return e(a,{method:"POST",body:JSON.stringify(b)})}async function h(a,b){return e(a,{method:"PUT",body:JSON.stringify(b)})}async function i(a){return e(a,{method:"DELETE"})}},79795,a=>{"use strict";a.s(["Header",()=>e]);var b=a.i(87924),c=a.i(50944),d=a.i(39107);function e({title:a,showHomeButton:e=!1,showChatsButton:f=!1,showSettingsButton:g=!1,showEndShiftButton:h=!1,showLogoutButton:i=!1,showBackButton:j=!1,isActive:k=!1,currentPath:l="",onEndShift:m}){let n=(0,c.useRouter)();return(0,b.jsxs)("header",{className:"h-12 bg-white border-b border-gray-200 flex items-center px-4 gap-4 flex-shrink-0",children:[(0,b.jsx)("div",{className:"font-bold text-xl text-[#680098] mr-4",children:a||"AnChat"}),j&&(0,b.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100",title:"–ù–∞–∑–∞–¥",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500",children:"–ù–∞–∑–∞–¥"})]}),e&&(0,b.jsxs)("button",{onClick:()=>n.push("/dashboard"),className:`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${"/dashboard"===l?"bg-blue-50 text-blue-700":""}`,title:"–ù–∞ –¥–∞—à–±–æ—Ä–¥",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${"/dashboard"===l?"text-blue-600":"text-gray-700"}`,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),(0,b.jsx)("span",{className:`text-[14px] ${"/dashboard"===l?"text-blue-700 font-medium":"text-gray-500"}`,children:"–î–∞—à–±–æ—Ä–¥"})]}),f&&(0,b.jsxs)("button",{onClick:()=>n.push("/chats"),className:`flex items-center gap-2 px-3 py-2 rounded ${!k?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"} ${l?.includes("/chats")?"bg-blue-50 text-blue-700":""}`,title:k?"–ß–∞—Ç–∏":"–ü–æ—á–Ω—ñ—Ç—å –∑–º—ñ–Ω—É —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø",disabled:!k,children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${l?.includes("/chats")?"text-blue-600":"text-gray-700"}`,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),(0,b.jsx)("span",{className:`text-[14px] ${l?.includes("/chats")?"text-blue-700 font-medium":"text-gray-500"}`,children:"–ß–∞—Ç–∏"})]}),g&&(0,b.jsxs)("button",{onClick:()=>n.push("/settings"),className:`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${"/settings"===l?"bg-blue-50 text-blue-700":""}`,title:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${"/settings"===l?"text-blue-600":"text-gray-700"}`,children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.165.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.506.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.108 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.939-1.11.939h-1.094c-.55 0-1.019-.397-1.11-.94l-.148-.893c-.071-.425-.383-.763-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.939-.56-.939-1.109v-1.094c0-.55.397-1.019.94-1.11l.894-.149c.424-.07.763-.383.929-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("span",{className:`text-[14px] ${"/settings"===l?"text-blue-700 font-medium":"text-gray-500"}`,children:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"})]}),h&&"/dashboard"!==l&&(0,b.jsxs)("button",{onClick:m,className:"group flex items-center gap-2 px-3 py-2 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É",disabled:!k,children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,className:"w-5 h-5 text-gray-700 group-hover:text-red-600 group-hover:fill-red-600 transition-all border border-gray-400 rounded group-hover:border-red-600",fill:"none",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500 group-hover:text-red-500 transition-colors",children:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏"})]}),i&&(0,b.jsxs)("button",{onClick:()=>{(0,d.clearSession)(),n.push("/login")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ml-auto",title:"–í–∏–π—Ç–∏",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500",children:"–í–∏–π—Ç–∏"})]})]})}},2365,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(87924),c=a.i(38246),d=a.i(39107),e=a.i(50944),f=a.i(72131),g=a.i(69844),h=a.i(79795);function i(){let a=(0,e.useRouter)(),[i,j]=(0,f.useState)([]),[k,l]=(0,f.useState)(null),[m,n]=(0,f.useState)([]),[o,p]=(0,f.useState)(!1);async function q(){try{let[a,b,c]=await Promise.all([(0,g.apiGet)("/api/shifts/logs"),(0,g.apiGet)("/api/shifts/active"),(0,g.apiGet)("/api/shifts/is-active")]);j(a),n(b),p(!!c?.active)}catch(a){l("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ª–æ–≥ –∞—É–¥–∏—Ç—É –∑–º—ñ–Ω")}}async function r(a){try{await (0,g.apiPost)("/api/shifts/force-end",{operatorId:a}),await q()}catch(a){}}return(0,f.useEffect)(()=>{let b=(0,d.getSession)();b&&"OWNER"===b.role?q():a.replace("/login")},[a]),(0,b.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,b.jsx)(h.Header,{title:"Owner Dashboard",showChatsButton:!0,showLogoutButton:!0,isActive:o,currentPath:"/owner"}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scroll",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,b.jsx)(c.default,{className:"border rounded p-3 hover:bg-gray-50",href:"/chats",children:"–ß–∞—Ç–∏"}),(0,b.jsx)(c.default,{className:"border rounded p-3 hover:bg-gray-50",href:"/operators",children:"–û–ø–µ—Ä–∞—Ç–æ—Ä–∏"}),(0,b.jsx)(c.default,{className:"border rounded p-3 hover:bg-gray-50",href:"/profiles",children:"–ü—Ä–æ—Ñ—ñ–ª—ñ"})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"–ê–∫—Ç–∏–≤–Ω—ñ –∑–º—ñ–Ω–∏"}),(0,b.jsx)("div",{className:"border rounded divide-y mb-6",children:0===m.length?(0,b.jsx)("div",{className:"p-3 text-gray-500",children:"–ê–∫—Ç–∏–≤–Ω–∏—Ö –∑–º—ñ–Ω –Ω–µ–º–∞—î"}):m.map(a=>(0,b.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.operatorName}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["–°—Ç–∞—Ä—Ç: ",new Date(a.startedAt).toLocaleString("uk-UA")," ¬∑ –ì—Ä—É–ø: ",a.groupsCount]})]}),(0,b.jsx)("button",{className:"text-sm px-3 py-1 bg-red-600 text-white rounded hover:opacity-90",onClick:()=>r(a.operatorId),children:"–ó—É–ø–∏–Ω–∏—Ç–∏"})]},a.shiftId))}),(0,b.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"–ê—É–¥–∏—Ç –∑–º—ñ–Ω"}),k&&(0,b.jsx)("div",{className:"text-red-600 text-sm mb-2",children:k}),(0,b.jsx)("div",{className:"border rounded divide-y",children:0===i.length?(0,b.jsx)("div",{className:"p-3 text-gray-500",children:"–ü–æ–¥—ñ–π –Ω–µ–º–∞—î"}):i.map(a=>(0,b.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium",children:["START"===a.action?"–ü–æ—á–∞—Ç–æ–∫ –∑–º—ñ–Ω–∏":"–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–º—ñ–Ω–∏"," ‚Äî ",a.operatorName]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleString("uk-UA")}),a.message&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.message})]}),(0,b.jsx)("div",{className:`text-xs px-2 py-1 rounded ${"START"===a.action?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.action})]},a.id))})]})]})]})}}];

//# sourceMappingURL=_5b500426._.js.map