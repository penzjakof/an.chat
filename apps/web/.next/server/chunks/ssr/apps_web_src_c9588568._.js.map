{"version":3,"sources":["turbopack:///[project]/apps/web/src/lib/api.ts","turbopack:///[project]/apps/web/src/components/Header.tsx","turbopack:///[project]/apps/web/src/app/dashboard/page.tsx"],"sourcesContent":["import { clearSession, getAccessToken } from './session';\n\nconst API_BASE = typeof window !== 'undefined'\n  ? window.location.origin\n  : (process.env.NEXT_PUBLIC_API_URL ?? 'http://localhost:4000');\n\nfunction authz(): HeadersInit {\n\tconst token = getAccessToken();\n\treturn token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nasync function handle<T>(res: Response, path: string): Promise<T> {\n\tif (res.status === 401) {\n\t\tconsole.error('üö® API 401 Unauthorized:', path);\n\t\tconsole.error('üîë Current token:', getAccessToken() ? 'Present' : 'Missing');\n\t\tclearSession();\n\t\tif (typeof window !== 'undefined') {\n\t\t\tconsole.error('üîÑ Redirecting to login...');\n\t\t\twindow.location.href = '/login';\n\t\t}\n\t\tthrow new Error('Unauthorized');\n\t}\n\tif (!res.ok) {\n\t\t// –°–ø—Ä–æ–±—É—î–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ\n\t\ttry {\n\t\t\tconst errorData = await res.json();\n\t\t\tconst errorMessage = errorData.message || `${res.status} ${path}`;\n\t\t\tthrow new Error(errorMessage);\n\t\t} catch {\n\t\t\t// –Ø–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–∞—Ä—Å–∏—Ç–∏ JSON, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –ø–æ–º–∏–ª–∫—É\n\t\t\tthrow new Error(`${res.status} ${path}`);\n\t\t}\n\t}\n\treturn res.json() as Promise<T>;\n}\n\nfunction sleep(ms: number) {\n\treturn new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function apiRequest<T>(path: string, options: RequestInit = {}): Promise<T> {\n\tconst headers = {\n\t\t...authz(),\n\t\t...(options.body ? { 'content-type': 'application/json' } : {}),\n\t\t...options.headers\n\t};\n\n\t// –õ–æ–≥—É—î–º–æ —Ç—ñ–ª—å–∫–∏ –≤ development —ñ —Ç—ñ–ª—å–∫–∏ –≤–∞–∂–ª–∏–≤—ñ –∑–∞–ø–∏—Ç–∏ (–Ω–µ photo-statuses)\n\t// –ù–æ—Ä–º–∞–ª—ñ–∑—É—î–º–æ —à–ª—è—Ö: —è–∫—â–æ –Ω–µ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ /api, –¥–æ–¥–∞—î–º–æ –ø—Ä–µ—Ñ—ñ–∫—Å\n\tconst normalizedPath = path.startsWith('/api')\n\t\t? path\n\t\t: (path.startsWith('/') ? `/api${path}` : `/api/${path}`);\n\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconst method = options.method || 'GET';\n\t\tconst isPhotoStatusRequest = normalizedPath.includes('photo-statuses');\n\t\tconst shouldLog = (method !== 'GET' || !headers.Authorization) && !isPhotoStatusRequest;\n\t\tif (shouldLog) {\n\t\t\tconsole.log('üåê API Request:', {\n\t\t\t\turl: `${API_BASE}${normalizedPath}`,\n\t\t\t\tmethod,\n\t\t\t\thasAuth: !!headers.Authorization,\n\t\t\t\thasBody: !!options.body\n\t\t\t});\n\t\t}\n\t}\n\n\n\t// –†–µ—Ç—Ä–∞—ó –¥–ª—è 429: GET —Ç–∞ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ POST (—Å—Ç–∞—Ç—É—Å–∏ –≥–∞–ª–µ—Ä–µ—ó)\n\tconst method = (options.method || 'GET').toUpperCase();\n\tconst isIdempotentStatusesPost = method === 'POST' && (\n\t\tpath.includes('/api/gallery/photo-statuses') ||\n\t\tpath.includes('/api/gallery/video-statuses') ||\n\t\tpath.includes('/api/gallery/audio-statuses')\n\t);\n\tconst maxRetries = (method === 'GET' || isIdempotentStatusesPost) ? 3 : 0;\n\tlet attempt = 0;\n\n\twhile (true) {\n\t\tconst res = await fetch(`${API_BASE}${normalizedPath}`, {\n\t\t\t...options,\n\t\t\theaders,\n\t\t\tcache: 'no-store',\n\t\t});\n\n\t\tif (res.status === 429 && attempt < maxRetries) {\n\t\t\t// –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–∏–π backoff + –ø–æ–≤–∞–≥–∞ –¥–æ Retry-After, —è–∫—â–æ —î\n\t\t\tattempt += 1;\n\t\t\tconst retryAfterHeader = res.headers.get('Retry-After');\n\t\t\tlet delayMs = 0;\n\t\t\tif (retryAfterHeader) {\n\t\t\t\tconst seconds = Number(retryAfterHeader);\n\t\t\t\tdelayMs = Number.isFinite(seconds) ? seconds * 1000 : 0;\n\t\t\t}\n\t\t\t// –Ø–∫—â–æ Retry-After –Ω–µ –∑–∞–¥–∞–Ω–∏–π ‚Äî 500ms * 2^(attempt-1) + –Ω–µ–≤–µ–ª–∏–∫–∏–π jitter\n\t\t\tif (delayMs === 0) {\n\t\t\t\tdelayMs = 500 * Math.pow(2, attempt - 1) + Math.floor(Math.random() * 200);\n\t\t\t}\n\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\tconsole.warn(`‚è≥ 429 on ${path}, retry ${attempt}/${maxRetries} in ${delayMs}ms`);\n\t\t\t}\n\t\t\tawait sleep(delayMs);\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn handle<T>(res, path);\n\t}\n}\n\nexport async function apiGet<T>(path: string, params?: Record<string, string>): Promise<T> {\n\tconst url = params ? `${path}?${new URLSearchParams(params).toString()}` : path;\n\treturn apiRequest<T>(url, { method: 'GET' });\n}\n\nexport async function apiPost<T>(path: string, body: unknown): Promise<T> {\n\treturn apiRequest<T>(path, { \n\t\tmethod: 'POST', \n\t\tbody: JSON.stringify(body) \n\t});\n}\n\nexport async function apiPut<T>(path: string, body: unknown): Promise<T> {\n\treturn apiRequest<T>(path, { \n\t\tmethod: 'PUT', \n\t\tbody: JSON.stringify(body) \n\t});\n}\n\nexport async function apiDelete<T>(path: string): Promise<T> {\n\treturn apiRequest<T>(path, { method: 'DELETE' });\n}\n","'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { clearSession } from '@/lib/session';\n\ninterface HeaderProps {\n  title?: string;\n  showHomeButton?: boolean;\n  showChatsButton?: boolean;\n  showSettingsButton?: boolean;\n  showEndShiftButton?: boolean;\n  showLogoutButton?: boolean;\n  showBackButton?: boolean;\n  isActive?: boolean;\n  currentPath?: string;\n  onEndShift?: () => void;\n}\n\nexport function Header({\n  title,\n  showHomeButton = false,\n  showChatsButton = false,\n  showSettingsButton = false,\n  showEndShiftButton = false,\n  showLogoutButton = false,\n  showBackButton = false,\n  isActive = false,\n  currentPath = '',\n  onEndShift\n}: HeaderProps) {\n  const router = useRouter();\n\n  return (\n    <header className=\"h-12 bg-white border-b border-gray-200 flex items-center px-4 gap-4 flex-shrink-0\">\n      {/* –ù–∞–∑–≤–∞ –¥–æ–¥–∞—Ç–∫—É –∞–±–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */}\n      <div className=\"font-bold text-xl text-[#680098] mr-4\">\n        {title || 'AnChat'}\n      </div>\n\n      {/* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */}\n      {showBackButton && (\n        <button\n          onClick={() => window.history.back()}\n          className=\"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100\"\n          title=\"–ù–∞–∑–∞–¥\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 text-gray-700\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\" />\n          </svg>\n          <span className=\"text-[14px] text-gray-500\">–ù–∞–∑–∞–¥</span>\n        </button>\n      )}\n\n      {/* –ö–Ω–æ–ø–∫–∞ –Ω–∞ –¥–∞—à–±–æ—Ä–¥ */}\n      {showHomeButton && (\n        <button\n          onClick={() => router.push('/dashboard')}\n          className={`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${\n            currentPath === '/dashboard' ? 'bg-blue-50 text-blue-700' : ''\n          }`}\n          title=\"–ù–∞ –¥–∞—à–±–æ—Ä–¥\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className={`w-5 h-5 ${\n            currentPath === '/dashboard' ? 'text-blue-600' : 'text-gray-700'\n          }`}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5\" />\n          </svg>\n          <span className={`text-[14px] ${\n            currentPath === '/dashboard' ? 'text-blue-700 font-medium' : 'text-gray-500'\n          }`}>–î–∞—à–±–æ—Ä–¥</span>\n        </button>\n      )}\n\n      {/* –ö–Ω–æ–ø–∫–∞ —á–∞—Ç—ñ–≤ */}\n      {showChatsButton && (\n        <button\n          onClick={() => router.push('/chats')}\n          className={`flex items-center gap-2 px-3 py-2 rounded ${\n            !isActive ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'\n          } ${\n            currentPath?.includes('/chats') ? 'bg-blue-50 text-blue-700' : ''\n          }`}\n          title={!isActive ? \"–ü–æ—á–Ω—ñ—Ç—å –∑–º—ñ–Ω—É —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø\" : \"–ß–∞—Ç–∏\"}\n          disabled={!isActive}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className={`w-5 h-5 ${\n            currentPath?.includes('/chats') ? 'text-blue-600' : 'text-gray-700'\n          }`}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\" />\n          </svg>\n          <span className={`text-[14px] ${\n            currentPath?.includes('/chats') ? 'text-blue-700 font-medium' : 'text-gray-500'\n          }`}>–ß–∞—Ç–∏</span>\n        </button>\n      )}\n\n      {/* –ö–Ω–æ–ø–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å */}\n      {showSettingsButton && (\n        <button\n          onClick={() => router.push('/settings')}\n          className={`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${\n            currentPath === '/settings' ? 'bg-blue-50 text-blue-700' : ''\n          }`}\n          title=\"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className={`w-5 h-5 ${\n            currentPath === '/settings' ? 'text-blue-600' : 'text-gray-700'\n          }`}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.165.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.506.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.108 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.939-1.11.939h-1.094c-.55 0-1.019-.397-1.11-.94l-.148-.893c-.071-.425-.383-.763-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.939-.56-.939-1.109v-1.094c0-.55.397-1.019.94-1.11l.894-.149c.424-.07.763-.383.929-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z\" />\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          <span className={`text-[14px] ${\n            currentPath === '/settings' ? 'text-blue-700 font-medium' : 'text-gray-500'\n          }`}>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</span>\n        </button>\n      )}\n\n      {/* –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É */}\n      {showEndShiftButton && currentPath !== '/dashboard' && (\n        <button\n          onClick={onEndShift}\n          className=\"group flex items-center gap-2 px-3 py-2 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n          title=\"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É\"\n          disabled={!isActive}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" strokeWidth={1.5} className=\"w-5 h-5 text-gray-700 group-hover:text-red-600 group-hover:fill-red-600 transition-all border border-gray-400 rounded group-hover:border-red-600\" fill=\"none\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z\" />\n          </svg>\n          <span className=\"text-[14px] text-gray-500 group-hover:text-red-500 transition-colors\">–ó–∞–≤–µ—Ä—à–∏—Ç–∏</span>\n        </button>\n      )}\n\n\n      {/* –ö–Ω–æ–ø–∫–∞ –≤–∏—Ö–æ–¥—É */}\n      {showLogoutButton && (\n        <button\n          onClick={() => { clearSession(); router.push('/login'); }}\n          className=\"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ml-auto\"\n          title=\"–í–∏–π—Ç–∏\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 text-gray-700\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25\" />\n          </svg>\n          <span className=\"text-[14px] text-gray-500\">–í–∏–π—Ç–∏</span>\n        </button>\n      )}\n    </header>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getRole, getSession, clearSession } from '@/lib/session';\nimport { apiGet, apiPost } from '@/lib/api';\nimport { useToast } from '@/contexts/ToastContext';\nimport { Header } from '@/components/Header';\n\ninterface GroupStatus {\n  id: string;\n  name: string;\n  busy: boolean;\n  operatorName: string | null;\n  operatorId: string | null;\n}\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const { showToast } = useToast();\n  const [groups, setGroups] = useState<GroupStatus[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [starting, setStarting] = useState(false);\n  const [ending, setEnding] = useState(false);\n  const [active, setActive] = useState<boolean>(false);\n\n  useEffect(() => {\n    const session = getSession();\n    if (!session) {\n      router.push('/login');\n      return;\n    }\n    const role = getRole();\n    if (role === 'OWNER') {\n      router.push('/owner');\n      return;\n    }\n    load();\n  }, [router]);\n\n  async function load() {\n    try {\n      setLoading(true);\n      const [status, gs] = await Promise.all([\n        apiGet<{ active: boolean }>('/api/shifts/is-active'),\n        apiGet<GroupStatus[]>('/api/shifts/groups-status'),\n      ]);\n      setActive(!!status?.active);\n      setGroups(gs);\n    } catch (e) {\n      setError('–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥—Ä—É–ø–∏');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function startShift() {\n    try {\n      setStarting(true);\n      const can = await apiGet<{ canStart: boolean; busyGroups: { id: string; name: string }[] }>(\n        '/api/shifts/can-start'\n      );\n      if (!can.canStart) {\n        const msg = '–î–µ—è–∫—ñ –≥—Ä—É–ø–∏ –∑–∞–π–Ω—è—Ç—ñ: ' + can.busyGroups.map((g) => g.name).join(', ');\n        setError(msg);\n        showToast({ messageId: '', type: 'error', message: msg } as any);\n        return;\n      }\n      await apiPost('/api/shifts/start', {});\n      showToast({ messageId: '', type: 'info', message: '–ó–º—ñ–Ω—É —Ä–æ–∑–ø–æ—á–∞—Ç–æ' } as any);\n      router.push('/chats');\n    } catch (e) {\n      setError('–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É');\n      showToast({ messageId: '', type: 'error', message: '–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É' } as any);\n    } finally {\n      setStarting(false);\n    }\n  }\n\n  async function endShift() {\n    try {\n      setEnding(true);\n      await apiPost('/api/shifts/end', {});\n      showToast({ messageId: '', type: 'info', message: '–ó–º—ñ–Ω—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ' } as any);\n      setActive(false);\n      load();\n    } catch (e) {\n      showToast({ messageId: '', type: 'error', message: '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É' } as any);\n    } finally {\n      setEnding(false);\n    }\n  }\n\n  const hasBusy = groups.some((g) => g.busy);\n\n  if (loading) return <div className=\"p-6\">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>;\n\n  return (\n    <div className=\"flex flex-col h-screen\">\n      <Header\n        showHomeButton={true}\n        showChatsButton={true}\n        showSettingsButton={true}\n        showEndShiftButton={true}\n        showLogoutButton={true}\n        isActive={active}\n        currentPath=\"/dashboard\"\n        onEndShift={endShift}\n      />\n\n      {/* –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */}\n      <div className=\"flex-1 bg-white overflow-y-auto custom-scroll\">\n\n        <div className=\"max-w-xl mx-auto p-6 space-y-6\">\n          <h1 className=\"text-2xl font-bold\">–û—Å–æ–±–∏—Å—Ç–∏–π –¥–∞—à–±–æ—Ä–¥</h1>\n          <p className=\"text-gray-600\">–í–∞—à—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –≥—Ä—É–ø–∏ —Ç–∞ —ó—Ö –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å:</p>\n\n          {error && <div className=\"text-red-600 text-sm\">{error}</div>}\n\n          <div className=\"border rounded divide-y\">\n            {groups.length === 0 ? (\n              <div className=\"p-3 text-gray-500\">–ì—Ä—É–ø–∏ –Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ</div>\n            ) : (\n              groups.map((g) => (\n                <div key={g.id} className=\"p-3 flex items-center justify-between\">\n                  <div>\n                    <div className=\"font-medium\">{g.name}</div>\n                    <div className=\"text-sm text-gray-500\">\n                      {g.busy\n                        ? `–ó–∞–π–Ω—è—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º: ${g.operatorName || g.operatorId}`\n                        : '–ì–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–±–æ—Ç–∏'}\n                    </div>\n                  </div>\n                  <div\n                    className={`w-2 h-2 rounded-full ${g.busy ? 'bg-red-500' : 'bg-green-500'}`}\n                    title={g.busy ? '–ó–∞–π–Ω—è—Ç–∞' : '–í—ñ–ª—å–Ω–∞'}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n\n          <div className=\"flex gap-2\">\n            <button\n              className={`bg-primary text-white px-4 py-2 rounded hover:opacity-90 disabled:opacity-50`}\n              onClick={startShift}\n              disabled={hasBusy || starting || active}\n            >\n              –ü–æ—á–∞—Ç–∏ –∑–º—ñ–Ω—É\n            </button>\n            <button\n              className={`bg-gray-600 text-white px-4 py-2 rounded hover:opacity-90 disabled:opacity-50`}\n              onClick={endShift}\n              disabled={!active || ending}\n            >\n              –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}