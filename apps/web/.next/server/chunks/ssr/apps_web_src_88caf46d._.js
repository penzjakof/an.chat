module.exports=[69844,a=>{"use strict";a.s(["apiDelete",()=>i,"apiGet",()=>f,"apiPost",()=>g,"apiPut",()=>h]);var b=a.i(39107);let c=process.env.NEXT_PUBLIC_API_URL??"http://localhost:4000";async function d(a,c){if(401===a.status)throw console.error("üö® API 401 Unauthorized:",c),console.error("üîë Current token:",(0,b.getAccessToken)()?"Present":"Missing"),(0,b.clearSession)(),Error("Unauthorized");if(!a.ok)try{let b=(await a.json()).message||`${a.status} ${c}`;throw Error(b)}catch{throw Error(`${a.status} ${c}`)}return a.json()}async function e(a,f={}){let g={...function(){let a=(0,b.getAccessToken)();return a?{Authorization:`Bearer ${a}`}:{}}(),...f.body?{"content-type":"application/json"}:{},...f.headers},h=a.startsWith("/api")?a:a.startsWith("/")?`/api${a}`:`/api/${a}`,i=(f.method||"GET").toUpperCase(),j="POST"===i&&(a.includes("/api/gallery/photo-statuses")||a.includes("/api/gallery/video-statuses")||a.includes("/api/gallery/audio-statuses")),k="GET"===i||j?3:0,l=0;for(;;){let b=await fetch(`${c}${h}`,{...f,headers:g,cache:"no-store"});if(429===b.status&&l<k){l+=1;let a=b.headers.get("Retry-After"),c=0;if(a){let b=Number(a);c=Number.isFinite(b)?1e3*b:0}0===c&&(c=500*Math.pow(2,l-1)+Math.floor(200*Math.random())),await function(a){return new Promise(b=>setTimeout(b,a))}(c);continue}return d(b,a)}}async function f(a,b){return e(b?`${a}?${new URLSearchParams(b).toString()}`:a,{method:"GET"})}async function g(a,b){return e(a,{method:"POST",body:JSON.stringify(b)})}async function h(a,b){return e(a,{method:"PUT",body:JSON.stringify(b)})}async function i(a){return e(a,{method:"DELETE"})}},79795,a=>{"use strict";a.s(["Header",()=>e]);var b=a.i(87924),c=a.i(50944),d=a.i(39107);function e({title:a,showHomeButton:e=!1,showChatsButton:f=!1,showSettingsButton:g=!1,showEndShiftButton:h=!1,showLogoutButton:i=!1,showBackButton:j=!1,isActive:k=!1,currentPath:l="",onEndShift:m}){let n=(0,c.useRouter)();return(0,b.jsxs)("header",{className:"h-12 bg-white border-b border-gray-200 flex items-center px-4 gap-4 flex-shrink-0",children:[(0,b.jsx)("div",{className:"font-bold text-xl text-[#680098] mr-4",children:a||"AnChat"}),j&&(0,b.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100",title:"–ù–∞–∑–∞–¥",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500",children:"–ù–∞–∑–∞–¥"})]}),e&&(0,b.jsxs)("button",{onClick:()=>n.push("/dashboard"),className:`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${"/dashboard"===l?"bg-blue-50 text-blue-700":""}`,title:"–ù–∞ –¥–∞—à–±–æ—Ä–¥",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${"/dashboard"===l?"text-blue-600":"text-gray-700"}`,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})}),(0,b.jsx)("span",{className:`text-[14px] ${"/dashboard"===l?"text-blue-700 font-medium":"text-gray-500"}`,children:"–î–∞—à–±–æ—Ä–¥"})]}),f&&(0,b.jsxs)("button",{onClick:()=>n.push("/chats"),className:`flex items-center gap-2 px-3 py-2 rounded ${!k?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"} ${l?.includes("/chats")?"bg-blue-50 text-blue-700":""}`,title:k?"–ß–∞—Ç–∏":"–ü–æ—á–Ω—ñ—Ç—å –∑–º—ñ–Ω—É —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø",disabled:!k,children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${l?.includes("/chats")?"text-blue-600":"text-gray-700"}`,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),(0,b.jsx)("span",{className:`text-[14px] ${l?.includes("/chats")?"text-blue-700 font-medium":"text-gray-500"}`,children:"–ß–∞—Ç–∏"})]}),g&&(0,b.jsxs)("button",{onClick:()=>n.push("/settings"),className:`flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ${"/settings"===l?"bg-blue-50 text-blue-700":""}`,title:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`w-5 h-5 ${"/settings"===l?"text-blue-600":"text-gray-700"}`,children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.165.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.108 1.204.165.397.506.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.108 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.939-1.11.939h-1.094c-.55 0-1.019-.397-1.11-.94l-.148-.893c-.071-.425-.383-.763-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.939-.56-.939-1.109v-1.094c0-.55.397-1.019.94-1.11l.894-.149c.424-.07.763-.383.929-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("span",{className:`text-[14px] ${"/settings"===l?"text-blue-700 font-medium":"text-gray-500"}`,children:"–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è"})]}),h&&"/dashboard"!==l&&(0,b.jsxs)("button",{onClick:m,className:"group flex items-center gap-2 px-3 py-2 rounded hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–º—ñ–Ω—É",disabled:!k,children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,className:"w-5 h-5 text-gray-700 group-hover:text-red-600 group-hover:fill-red-600 transition-all border border-gray-400 rounded group-hover:border-red-600",fill:"none",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500 group-hover:text-red-500 transition-colors",children:"–ó–∞–≤–µ—Ä—à–∏—Ç–∏"})]}),i&&(0,b.jsxs)("button",{onClick:()=>{(0,d.clearSession)(),n.push("/login")},className:"flex items-center gap-2 px-3 py-2 rounded hover:bg-gray-100 ml-auto",title:"–í–∏–π—Ç–∏",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-700",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H2.25"})}),(0,b.jsx)("span",{className:"text-[14px] text-gray-500",children:"–í–∏–π—Ç–∏"})]})]})}},70827,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(69844),e=a.i(39107),f=a.i(79795);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({username:"",name:"",password:"",operatorCode:"",groupId:""});(0,c.useEffect)(()=>{if("OWNER"!==(0,e.getRole)()){m("–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ"),k(!1);return}v()},[]);let v=async()=>{try{k(!0);let[a,b,c]=await Promise.all([(0,d.apiGet)("/users/operators"),(0,d.apiGet)("/groups"),(0,d.apiGet)("/api/shifts/is-active")]);g(a),i(b),o(!!c?.active)}catch(a){m("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö"),console.error(a)}finally{k(!1)}},w=async a=>{a.preventDefault();let b=(0,e.getAgencyCode)();if(!b)return void m("–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–¥ –∞–≥–µ–Ω—Ü—ñ—ó");try{await (0,d.apiPost)("/users/operator",{agencyCode:b,...t}),s(!1),u({username:"",name:"",password:"",operatorCode:"",groupId:""}),v()}catch(a){m("–ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"),console.error(a)}},x=async a=>{if(a.preventDefault(),p)try{await (0,d.apiPut)(`/users/operators/${p.id}`,t),q(null),u({username:"",name:"",password:"",operatorCode:"",groupId:""}),v()}catch(a){m("–ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"),console.error(a)}},y=async a=>{if(confirm("–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—å–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞?"))try{await (0,d.apiDelete)(`/users/operators/${a}`),v()}catch(a){m("–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"),console.error(a)}};return j?(0,b.jsx)("div",{className:"p-6",children:"–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..."}):l?(0,b.jsx)("div",{className:"p-6 text-red-600",children:l}):(0,b.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,b.jsx)(f.Header,{showBackButton:!0,showChatsButton:!0,isActive:n,currentPath:"/operators"}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 custom-scroll",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏"}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"bg-primary text-white px-4 py-2 rounded hover:opacity-90",children:"–î–æ–¥–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"})]}),(r||p)&&(0,b.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:p?"–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞":"–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞"}),(0,b.jsxs)("form",{onSubmit:p?x:w,className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"–Æ–∑–µ—Ä–Ω–µ–π–º"}),(0,b.jsx)("input",{type:"text",value:t.username,onChange:a=>u({...t,username:a.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"–Ü–º'—è"}),(0,b.jsx)("input",{type:"text",value:t.name,onChange:a=>u({...t,name:a.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["–ü–∞—Ä–æ–ª—å ",p&&"(–∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º, —â–æ–± –Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏)"]}),(0,b.jsx)("input",{type:"password",value:t.password,onChange:a=>u({...t,password:a.target.value}),className:"w-full p-2 border rounded",required:!p})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"–†–µ—Ñ –∫–æ–¥"}),(0,b.jsx)("input",{type:"text",value:t.operatorCode,onChange:a=>u({...t,operatorCode:a.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"–ì—Ä—É–ø–∞"}),(0,b.jsxs)("select",{value:t.groupId,onChange:a=>u({...t,groupId:a.target.value}),className:"w-full p-2 border rounded",children:[(0,b.jsx)("option",{value:"",children:"–ë–µ–∑ –≥—Ä—É–ø–∏"}),h.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"col-span-2 flex gap-2",children:[(0,b.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:opacity-90",children:p?"–û–Ω–æ–≤–∏—Ç–∏":"–°—Ç–≤–æ—Ä–∏—Ç–∏"}),(0,b.jsx)("button",{type:"button",onClick:()=>{q(null),s(!1),u({username:"",name:"",password:"",operatorCode:"",groupId:""})},className:"bg-gray-500 text-white px-4 py-2 rounded hover:opacity-90",children:"–°–∫–∞—Å—É–≤–∞—Ç–∏"})]})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-100",children:[(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–Æ–∑–µ—Ä–Ω–µ–π–º"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–Ü–º'—è"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–†–µ—Ñ –∫–æ–¥"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–ì—Ä—É–ø–∞"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–°—Ç–∞—Ç—É—Å"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–°—Ç–≤–æ—Ä–µ–Ω–æ"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"–î—ñ—ó"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.username}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.name}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.operatorCode}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.operatorLinks[0]?.group.name||"–ë–µ–∑ –≥—Ä—É–ø–∏"}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-sm ${"ACTIVE"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"ACTIVE"===a.status?"–ê–∫—Ç–∏–≤–Ω–∏–π":"–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π"})}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:new Date(a.createdAt).toLocaleDateString("uk-UA")}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{q(a),u({username:a.username,name:a.name,password:"",operatorCode:a.operatorCode,groupId:a.operatorLinks[0]?.group.id||""})},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm hover:opacity-90",children:"–†–µ–¥–∞–≥—É–≤–∞—Ç–∏"}),(0,b.jsx)("button",{onClick:()=>y(a.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:opacity-90",children:"–í–∏–¥–∞–ª–∏—Ç–∏"})]})})]},a.id))})]})}),0===a.length&&(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"–û–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"})]})]})}}];

//# sourceMappingURL=apps_web_src_88caf46d._.js.map