module.exports=[5833,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(39107);function f(){let a=(0,c.useRouter)(),[f,g]=(0,d.useState)(""),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(null);async function l(b){b.preventDefault(),k(null);try{let b=process.env.NEXT_PUBLIC_API_URL??"http://localhost:4000",c=await fetch(b+"/api/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:f,password:h})});if(!c.ok)throw Error("Невірні дані");let{accessToken:d}=await c.json(),g=function(a){try{let[,b]=a.split(".");return JSON.parse(atob(b))}catch{return{}}}(d),i="OWNER"===g.role?"OWNER":"OPERATOR",j={accessToken:d,agencyCode:g.agencyCode??"",role:i,operatorCode:g.operatorCode,userId:g.sub};(0,e.setSession)(j),a.push("OWNER"===j.role?"/owner":"/dashboard")}catch(a){k(a instanceof Error?a.message:"Помилка входу")}}return(0,b.jsxs)("div",{className:"max-w-sm mx-auto p-6 space-y-4",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Вхід"}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-3",children:[(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm",children:"Username"}),(0,b.jsx)("input",{className:"border rounded px-2 py-1 w-full",value:f,onChange:a=>g(a.target.value)})]}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm",children:"Пароль"}),(0,b.jsx)("input",{type:"password",className:"border rounded px-2 py-1 w-full",value:h,onChange:a=>i(a.target.value)})]}),j&&(0,b.jsx)("div",{className:"text-red-600 text-sm",children:j}),(0,b.jsx)("button",{className:"bg-primary text-white px-3 py-1 rounded w-full",type:"submit",children:"Увійти"})]})]})}}];

//# sourceMappingURL=apps_web_src_app_login_page_tsx_2c576f75._.js.map