## TalkyTimes інтеграція (поточний стан)

- Провайдер `TalkyTimesProvider` підтримує мок-режим, якщо не задано `TT_BASE_URL`.
- Аутентифікація до AnChat: лише через Bearer JWT.
- Заголовок `x-requested-with` тепер встановлюється ДИНАМІЧНО: якщо у оператора є активна зміна для профілю, у всі запити до TT підставляється його реф-код як значення `x-requested-with`. Якщо активної зміни немає — заголовок не додається/залишається дефолтним.
- Заголовок `x-gateway` не використовується для TT API (тільки внутрішній контекст).

### Ендпоінти AnChat (проксі/агрегація)
- `GET /api/tt/dialogs` — список діалогів (JWT)
- `GET /api/tt/dialogs/:id/messages` — повідомлення (JWT)
- Надсилання повідомлень виконується через `/api/chats/dialogs/:id/text` (JWT)

### Нотатки
- Для локальної розробки TT відповіді генеруються випадково.
- Після додавання реального `TT_BASE_URL` буде потрібен маппінг полів і обробка помилок.

### Додатково
- Джерело реф-коду: `Shifts` → активна зміна групи профілю → `operator.operatorCode`.
- Контроль додавання: провайдер `TalkyTimesProvider` використовує `TalkyTimesSessionService.getActiveOperatorRefForProfile(...)` і перевіряє `hasActiveShiftForOperatorCode(...)`.
- Всі попередні хардкоди `x-requested-with` видалено.


