# üì∏ MediaGallery - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## –û–≥–ª—è–¥
MediaGallery - —Ü–µ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ–¥—ñ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (—Ñ–æ—Ç–æ, –≤—ñ–¥–µ–æ, –∞—É–¥—ñ–æ) –≤ AnChat –¥–æ–¥–∞—Ç–∫—É. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ TalkyTimes API –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–¥—ñ–∞ —Ç–∞ —ó—Ö –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç.

## –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### ‚ú® –ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å—ñ—Ç–∫–∞ 5x‚àû –∑ lazy loading
- üî• –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –¥–ª—è special —Ñ–æ—Ç–æ (fire —ñ–∫–æ–Ω–∫–∞)
- üéØ –¢–∏–ø–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É: Regular, Special, Special+, Temporary
- üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –¥–æ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ (< 15)
- üìú –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Å–∫—Ä–æ–ª –±–µ–∑ –∫–Ω–æ–ø–æ–∫
- üì§ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ —á–∞—Ç
- üé® –°—ñ—Ä—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ–æ—Ç–æ
- ‚ö° –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–µ—à –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏
- üéµ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—ñ–¥–µ–æ —Ç–∞ –∞—É–¥—ñ–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- üìä –§—ñ–ª—å—Ç—Ä–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (All, Available, Accessed, Sent)
- üñºÔ∏è –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –∑–æ–±—Ä–∞–∂–µ–Ω—å
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ
- üè∑Ô∏è –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ç–µ–≥–∏ —Ç–∞ –º–µ—Ç–∞-–¥–∞–Ω—ñ

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### Frontend (React/Next.js)
```
apps/web/src/components/MediaGallery.tsx
‚îú‚îÄ‚îÄ –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏:
‚îÇ   ‚îú‚îÄ‚îÄ Photo - –æ—Å–Ω–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–æ—Ç–æ
‚îÇ   ‚îú‚îÄ‚îÄ PhotoTag - —Ç–µ–≥–∏ —Ñ–æ—Ç–æ (special, special_plus, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ PhotoUrls - URL –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ PhotoStatus - —Å—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ PhotoConnectionStatus - —Å—Ç–∞—Ç—É—Å –∑–≤'—è–∑–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ CachedPhotoData - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–µ—à—É
‚îú‚îÄ‚îÄ –°—Ç–∞–Ω —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:
‚îÇ   ‚îú‚îÄ‚îÄ photoType - —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç—É (regular/special/temporary)
‚îÇ   ‚îú‚îÄ‚îÄ mediaType - —Ç–∏–ø –º–µ–¥—ñ–∞ (photo/video/audio)
‚îÇ   ‚îú‚îÄ‚îÄ statusFilter - —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ photoStatuses - Map —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ
‚îÇ   ‚îî‚îÄ‚îÄ temporaryPhotoIds - –Ω–∞–±—ñ—Ä temporary ID
‚îú‚îÄ‚îÄ –ö–µ—à—É–≤–∞–Ω–Ω—è:
‚îÇ   ‚îú‚îÄ‚îÄ –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–µ—à –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ
‚îú‚îÄ‚îÄ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥
‚îÇ   ‚îú‚îÄ‚îÄ –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞ —Ç–∞–±–∏
‚îÇ   ‚îú‚îÄ‚îÄ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å—ñ—Ç–∫–∞
```

### Backend (NestJS)
```
apps/server/src/gallery/
‚îú‚îÄ‚îÄ gallery.controller.ts  # REST API endpoints
‚îú‚îÄ‚îÄ gallery.service.ts     # –ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∞ —Ç–∞ TalkyTimes —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ gallery.module.ts      # –ú–æ–¥—É–ª—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
```

## API Endpoints

### GET `/api/gallery/:profileId/photos`
–û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ–æ—Ç–æ –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `profileId` (string) ‚Äî ID –ø—Ä–æ—Ñ—ñ–ª—é
- `cursor` (string, optional) ‚Äî –∫—É—Ä—Å–æ—Ä –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
- `limit` (string, optional) ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (default: 50)
- `statuses` (string, optional) ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç—É—Å—ñ–≤ (comma-separated), default: `approved,approved_by_ai`
- `tags` (string, optional) ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–≥—ñ–≤ (comma-separated), –Ω–∞–ø—Ä.: `special,special_plus`
- `isTemporary` (boolean, optional) ‚Äî —Ñ—ñ–ª—å—Ç—Ä —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–æ—Ç–æ (default: false)

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "data": {
    "cursor": "49590541",
    "photos": [
      {
        "idPhoto": 49938731,
        "idUser": 117326723,
        "status": { "code": "approved_by_ai", "description": "Approved by AI" },
        "tags": [
          { "code": "special", "description": "Special" },
          { "code": "temporary", "description": "Temporary" }
        ],
        "urls": {
          "urlOriginal": "https://...",
          "urlPreview": "https://...",
          "urlStandard": "https://..."
        },
        "canDisagree": false,
        "comment": "",
        "declineReasons": []
      }
    ],
    "hasMore": true,
    "totalCount": 150
  }
}
```

### POST `/api/gallery/send-photos`
–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –º–µ–¥—ñ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ —á–∞—Ç

**Body:**
```json
{
  "idsGalleryPhotos": [51496050, 51496049],
  "idRegularUser": 26504239,
  "profileId": 7162437,
  "mediaType": "photo"
}
```

### POST `/api/gallery/photo-statuses`
–û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ (accessed/sent/null)

**Body:**
```json
{
  "idUser": 117326723,
  "idsPhotos": [51496050, 51496049],
  "profileId": 7162437
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
–ü—Ä–æ–∫—Å—ñ-–≤—ñ–¥–ø–æ–≤—ñ–¥—å TalkyTimes `/platform/gallery/photo/connection/list`.



## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```tsx
import { MediaGallery } from '@/components/MediaGallery';

<MediaGallery
  profileId="7162437"
  isOpen={isGalleryOpen}
  onClose={() => setIsGalleryOpen(false)}
  onPhotoSelect={(photos) => console.log('Selected:', photos)}
  maxSelection={6}
  context="other"
/>
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —á–∞—Ç—ñ
```tsx
<MediaGallery
  profileId={profileId.toString()}
  isOpen={isMediaGalleryOpen}
  onClose={() => setIsMediaGalleryOpen(false)}
  onPhotoSelect={handlePhotoSelect}
  maxSelection={6}
  context="chat"
  idRegularUser={idRegularUser}
/>
```

### –†–µ–∂–∏–º –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –¥–æ Exclusive Post (attach)
```tsx
<MediaGallery
  profileId={profileId.toString()}
  isOpen={isAttachGalleryOpen}
  onClose={() => setIsAttachGalleryOpen(false)}
  onPhotoSelect={() => { /* –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ attach */ }}
  maxSelection={6}
  context="chat"
  idRegularUser={idRegularUser}
  mode="attach"
  actionLabel="–ü—Ä–∏–∫—Ä—ñ–ø–∏—Ç–∏"
  allowAudio={false}
  allowedPhotoTabs={tier === 'specialplus' ? ['special','special_plus'] : ['special']}
  isSpecialPlusAllowed={tier === 'specialplus'}
  onAttach={({ photos, videos }) => {
    // –∑–±–µ—Ä–µ–≥—Ç–∏ –≤–∏–±—ñ—Ä —Ç–∞ –∑–∞–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª–∫—É
  }}
/> 
```

–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ attach:
- –ü–æ—á–∞—Ç–∫–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞ ‚Äî –ø–µ—Ä—à–∞ –¥–æ–∑–≤–æ–ª–µ–Ω–∞ (—É –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ `special`).
- –§–æ—Ç–æ –∑ —Ç–µ–≥–∞–º–∏ `special`/`special_plus` –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∫–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ (–±–µ–∑ grayscale).
- –ú—ñ—Ç–∫–∏ –≤–∫–ª–∞–¥–æ–∫: `Special` –∑ —ñ–∫–æ–Ω–∫–æ—é –≤–æ–≥–Ω—é; `Special+` –∑ —ñ–∫–æ–Ω–∫–æ—é –≤–æ–≥–Ω—é —Ç–∞ –º–∞–ª–µ–Ω—å–∫–∏–º "+" –ª—ñ–≤–æ—Ä—É—á –≤—ñ–¥ –Ω–∞–∑–≤–∏.

## Props

| Prop | –¢–∏–ø | –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π | –û–ø–∏—Å |
|------|-----|-------------|------|
| `profileId` | string | ‚úÖ | ID –ø—Ä–æ—Ñ—ñ–ª—é –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–¥—ñ–∞ |
| `isOpen` | boolean | ‚úÖ | –°—Ç–∞–Ω –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –≥–∞–ª–µ—Ä–µ—ó |
| `onClose` | () => void | ‚úÖ | Callback –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –≥–∞–ª–µ—Ä–µ—ó |
| `onPhotoSelect` | (photos: Photo[]) => void | ‚úÖ | Callback –¥–ª—è –≤–∏–±–æ—Ä—É —Ñ–æ—Ç–æ |
| `maxSelection` | number | ‚ùå | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–±—Ä–∞–Ω–∏—Ö —Ñ–æ—Ç–æ (default: 6) |
| `context` | 'chat' \| 'profile' \| 'other' | ‚ùå | –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (default: 'other') |
| `idRegularUser` | number | ‚ùå | ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –¥–ª—è context='chat') |

## –ù–æ–≤—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

```typescript
interface CachedPhotoData {
  idPhoto: number;
  idProfile: number;
  idUser: number;
  urlPreview: string;
  urlOriginal: string;
  status: 'accessed' | 'sent' | null;
  category: 'regular' | 'special' | 'temporary';
  lastAccessed: number;
  tags: PhotoTag[];
}

interface PhotoConnectionStatus {
  idPhoto: number;
  status: 'accessed' | 'sent' | null;
}
```

## –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏

### –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∏–ø—ñ–≤ –º–µ–¥—ñ–∞
- **Photo**: –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–∑–º—ñ—Ä–∞–º–∏ (preview/standard/original)
- **Video**: –≤—ñ–¥–µ–æ—Ñ–∞–π–ª–∏ –∑ –ø—Ä–µ–≤'—é —Ç–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–º–∏ URL
- **Audio**: –∞—É–¥—ñ–æ—Ñ–∞–π–ª–∏ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏

### –°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è (24 –≥–æ–¥–∏–Ω–∏)
1. **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–µ—à** –¥–ª—è –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ –º–µ–¥—ñ–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è** –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –Ω–æ–≤–∏—Ö —Ñ–æ—Ç–æ
3. **–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** —Å—Ç–∞—Ç—É—Å—ñ–≤ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
4. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ** –∑ –æ—á–∏—â–µ–Ω–Ω—è–º —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö

### –§—ñ–ª—å—Ç—Ä–∏ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
1. **–¢–∏–ø–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É:**
   - **Regular**: –∑–≤–∏—á–∞–π–Ω—ñ —Ñ–æ—Ç–æ (—Å–µ–ª–µ–∫—Ç–∞–±–µ–ª—å–Ω—ñ)
   - **Special**: –æ—Å–æ–±–ª–∏–≤—ñ —Ñ–æ—Ç–æ –∑ —Ç–µ–≥–∞–º–∏ (—Å—ñ—Ä—ñ, –Ω–µ—Å–µ–ª–µ–∫—Ç–∞–±–µ–ª—å–Ω—ñ)
   - **Temporary**: —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–æ—Ç–æ (–ø–æ–∑–Ω–∞—á–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ)

2. **–°—Ç–∞—Ç—É—Å–∏:**
   - **All**: –≤—Å—ñ —Ñ–æ—Ç–æ
   - **Available**: –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
   - **Accessed**: –≤–∂–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç—ñ
   - **Sent**: –≤–∂–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
1. **–°—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ:** –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ —Ñ–æ–Ω—ñ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤
2. **–ù–æ–≤–∏—Ö —Ñ–æ—Ç–æ:** –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ –¥–æ –∫—ñ–Ω—Ü—è —Å–ø–∏—Å–∫—É
3. **–ü–∞–≥—ñ–Ω–∞—Ü—ñ—è:** –∫—É—Ä—Å–æ—Ä-based –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –ö–æ–Ω—Ç–µ–∫—Å—Ç "chat"
1. **–†–æ–∑–¥—ñ–ª–∏ —Ñ–æ—Ç–æ:**
   - "–î–æ—Å—Ç—É–ø–Ω—ñ": –∑–≤–∏—á–∞–π–Ω—ñ —Ñ–æ—Ç–æ –±–µ–∑ special —Ç–µ–≥—ñ–≤ (—Å–µ–ª–µ–∫—Ç–∞–±–µ–ª—å–Ω—ñ)
   - "Special": —Ñ–æ—Ç–æ –∑ —Ç–µ–≥–∞–º–∏ special/special_plus (–Ω–µ—Å–µ–ª–µ–∫—Ç–∞–±–µ–ª—å–Ω—ñ, —Å—ñ—Ä—ñ)
   - "Temporary": —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–æ—Ç–æ (–≤—ñ–¥–∑–Ω–∞—á–∞—é—Ç—å—Å—è —ñ–∫–æ–Ω–∫–æ—é)

2. **–°—Ç–∞—Ç—É—Å–∏ —Ñ–æ—Ç–æ:**
   - –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –¥–ª—è accessed/sent —Ñ–æ—Ç–æ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤
   - –§—ñ–ª—å—Ç—Ä–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º

3. **–í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ:**
   - –ß–µ—Ä–µ–∑ TalkyTimes API `/platform/chat/send/gallery-photos`
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è –≥–∞–ª–µ—Ä–µ—ó –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏

### –ö–æ–Ω—Ç–µ–∫—Å—Ç "other"/"profile"
- –ü–æ–∫–∞–∑—É—î –≤—Å—ñ —Ñ–æ—Ç–æ –±–µ–∑ —Ä–æ–∑–¥—ñ–ª—ñ–≤
- –í—Å—ñ —Ñ–æ—Ç–æ —Å–µ–ª–µ–∫—Ç–∞–±–µ–ª—å–Ω—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î callback `onPhotoSelect` –∑–∞–º—ñ—Å—Ç—å API –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ —Ç–∞ —Ç–∏–ø—ñ–≤ –º–µ–¥—ñ–∞

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### –°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è
- **–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∫–µ—à –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏:** –∑–∞–º—ñ—Å—Ç—å –æ–∫—Ä–µ–º–∏—Ö –∫—É—Ä—Å–æ—Ä—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É
- **–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ–æ—Ç–æ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤
- **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ:** –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å:** –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- **–ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è:** `useMemo` –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ `useCallback` –¥–ª—è —Ñ—É–Ω–∫—Ü—ñ–π
- **Set/Map lookup:** O(1) –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–±—Ä–∞–Ω–∏—Ö —Ñ–æ—Ç–æ —Ç–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤
- **Debounce:** –û–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ scroll events (200ms)
- **Virtual scrolling:** –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤
- **Cleanup:** –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤–∏—Ç–æ–∫–∞–º –ø–∞–º'—è—Ç—ñ –≤ useEffect

### UX –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- **Lazy loading:** `loading="lazy"` –¥–ª—è –≤—Å—ñ—Ö –º–µ–¥—ñ–∞ —Ñ–∞–π–ª—ñ–≤
- **Skeleton states:** –∞–Ω—ñ–º–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- **Error handling:** graceful fallback –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö –º–µ—Ä–µ–∂—ñ
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ props —Ç–∞ API –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- **–ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥:** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–≥–ª—è–¥—É —Ñ–æ—Ç–æ
- **–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤:** –≤—ñ–∑—É–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç–∞–Ω —Ñ–æ—Ç–æ

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- **Batch requests:** –ø–∞–∫–µ—Ç–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ
- **Smart pagination:** –∫—É—Ä—Å–æ—Ä-based –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- **Memory management:** –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- **Type safety:** –ø–æ–≤–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π

## TalkyTimes —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### –û—Å–Ω–æ–≤–Ω—ñ Endpoints:
- `POST /platform/gallery/photo/list` ‚Äî –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ–æ—Ç–æ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é
- `POST /platform/chat/send/gallery-photos` ‚Äî –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –≤ —á–∞—Ç
- `POST /platform/gallery/photo/connection/list` ‚Äî —Å—Ç–∞—Ç—É—Å–∏ —Ñ–æ—Ç–æ (accessed/sent)

### –ù–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ API:
- `mediaType`: —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –º–µ–¥—ñ–∞ (photo/video/audio)
- `photoType`: —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Ñ–æ—Ç–æ (regular/special/temporary)
- `statuses`: —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- `batchSize`: —Ä–æ–∑–º—ñ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î TalkyTimes —Å–µ—Å—ñ—ó –Ω–∞–ø—Ä—è–º—É —á–µ—Ä–µ–∑ cookies
- –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ JWT —Ç–æ–∫–µ–Ω–∞
- `@Public()` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –Ω–∞ –≥–∞–ª–µ—Ä–µ—è endpoints
- –ü—Ä–∏ 401 –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –ø–æ—Ä–æ–∂–Ω—è/–ø–æ–º–∏–ª–∫–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å; –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–æ—Ñ—ñ–ª—é –≤ UI

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:
- **401 Unauthorized:** –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞/–ø–æ—Ä–æ–∂–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å; –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø—Ä–æ–ø–æ–Ω—É—î—Ç—å—Å—è –ø–µ—Ä–µ–≤-–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–æ—Ñ—ñ–ª—é
- **429 Rate Limit:** –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–±
- **500 Server Error:** fallback –Ω–∞ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ
- **Network Error:** retry –∑ –ø—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–æ—é –∑–∞—Ç—Ä–∏–º–∫–æ—é

## –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è

### Tailwind CSS –∫–ª–∞—Å–∏
```css
/* –û—Å–Ω–æ–≤–Ω–∞ —Å—ñ—Ç–∫–∞ */
.grid.grid-cols-5.gap-2.max-h-[400px].overflow-y-auto

/* Special —Ñ–æ—Ç–æ */
.grayscale.opacity-60  /* –°—ñ—Ä–∏–π —Ñ—ñ–ª—å—Ç—Ä */

/* Fire —ñ–∫–æ–Ω–∫–∞ */
.bg-pink-500.rounded-full.shadow-sm  /* –†–æ–∂–µ–≤–∏–π —Ñ–æ–Ω –∑ —Ç—ñ–Ω–Ω—é */

/* –°—Ç–∞–Ω–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è */
.animate-spin  /* –°–ø—ñ–Ω–µ—Ä */
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å
- –§—ñ–∫—Å–æ–≤–∞–Ω–∞ —Å—ñ—Ç–∫–∞ 5 –∫–æ–ª–æ–Ω–æ–∫
- `aspect-square` –¥–ª—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏—Ö —Ñ–æ—Ç–æ
- `max-h-[400px]` –∑ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–º —Å–∫—Ä–æ–ª–æ–º

## –ü–æ–º–∏–ª–∫–∏ —Ç–∞ —ó—Ö –≤–∏—Ä—ñ—à–µ–Ω–Ω—è

### –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

1. **"No active session found for profile X"**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π profileId –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—è —Å–µ—Å—ñ—è
   - **–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ profileId –≤ props —Ç–∞ —Å—Ç–∞–Ω —Å–µ—Å—ñ—ó

2. **–î—É–±–ª—ñ–∫–∞—Ç–∏ –∫–ª—é—á—ñ–≤ React / –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å –∫–µ—à–∞**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏ –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º
   - **–†—ñ—à–µ–Ω–Ω—è:** –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Set —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–µ—à—É –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Ç–∞–º–∏

3. **–¶–∏–∫–ª—ñ—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è / –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Å–∫—Ä–æ–ª**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ü—É—Å—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ TalkyTimes –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫—É—Ä—Å–æ—Ä–∞–º–∏
   - **–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ hasMore —Ç–∞ –ª—ñ–º—ñ—Ç —Å–ø—Ä–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (max 3)

4. **–í–∏—Ç–æ–∫–∏ –ø–∞–º'—è—Ç—ñ**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–∑–∞–∫—Ä–∏—Ç—ñ timeout, event listeners –∞–±–æ –≤–µ–ª–∏–∫—ñ –æ–±'—î–∫—Ç–∏ –≤ —Å—Ç–∞–Ω—ñ
   - **–†—ñ—à–µ–Ω–Ω—è:** Cleanup –≤ useEffect return —Ñ—É–Ω–∫—Ü—ñ—è—Ö —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∫–µ—à–∞

5. **–ù–µ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å–∏ —Ñ–æ—Ç–æ**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∏ –∑ batch requests –∞–±–æ –º–µ—Ä–µ–∂–µ–≤—ñ –ø–æ–º–∏–ª–∫–∏
   - **–†—ñ—à–µ–Ω–Ω—è:** –ü–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏ –∑ –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–æ—é –∑–∞—Ç—Ä–∏–º–∫–æ—é

6. **–ü–æ–≤—ñ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –≥–∞–ª–µ—Ä–µ–π**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –í—ñ–¥—Å—É—Ç–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–±–æ –Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
   - **–†—ñ—à–µ–Ω–Ω—è:** Intersection Observer –¥–ª—è lazy loading —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ä–æ–∑–º—ñ—Ä—ñ–≤

7. **–ü–æ–º–∏–ª–∫–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è (24h cache)**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∏ –∑ localStorage –∞–±–æ JSON —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—î—é
   - **–†—ñ—à–µ–Ω–Ω—è:** Graceful fallback –Ω–∞ –ø–æ—Ä–æ–∂–Ω—ñ–π –∫–µ—à —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

8. **–ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å —Ñ—ñ–ª—å—Ç—Ä—ñ–≤**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
   - **–†—ñ—à–µ–Ω–Ω—è:** useMemo –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ —Ç–∞ debouncing

### –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

```typescript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∫–µ—à–∞
console.log('Cache status:', {
  photosCount: photos.length,
  cacheSize: Object.keys(cachedData).length,
  lastUpdate: new Date(lastCacheUpdate)
});

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
console.log('Active requests:', {
  loadingPhotos: loading,
  loadingStatuses: statusRequestedPhotos.size,
  hasMorePhotos: hasMore
});
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

#### –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –≥–∞–ª–µ—Ä–µ—é –≤ —Ä—ñ–∑–Ω–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (chat/profile/other)
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ —Ç–∏–ø–∏ –º–µ–¥—ñ–∞ (photo/video/audio)
3. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (all/available/accessed/sent)
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º—ñ–∂ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É (regular/special/temporary)

#### –ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:
5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ —Ä–∞–∑—É
6. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –±–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–∫–µ—à)
7. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏
8. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à–∞

#### UX –µ–ª–µ–º–µ–Ω—Ç–∏:
9. –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ñ–æ—Ç–æ
10. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–∫—Ä–æ–ª-–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é
11. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ñ–æ—Ç–æ
12. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –ø–∞–∫–µ—Ç—ñ–≤ —Ñ–æ—Ç–æ

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

```typescript
// –ü—Ä–∏–∫–ª–∞–¥ —Ç–µ—Å—Ç –∫–µ–π—Å—ñ–≤
describe('MediaGallery', () => {
  test('should load photos from cache first', () => {
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –∫–µ—à–∞ –Ω–∞–¥ API
  });

  test('should handle different media types', () => {
    // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –ø–æ —Ç–∏–ø—É –º–µ–¥—ñ–∞
  });

  test('should update photo statuses correctly', () => {
    // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤
  });

  test('should handle network errors gracefully', () => {
    // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
  });
});
```

### Edge cases:
- **–ü–æ—Ä–æ–∂–Ω—è –≥–∞–ª–µ—Ä–µ—è:** –∫–æ–ª–∏ –Ω–µ–º–∞—î —Ñ–æ—Ç–æ –≤–∑–∞–≥–∞–ª—ñ
- **–ú–µ—Ä–µ–∂–µ–≤—ñ –ø–æ–º–∏–ª–∫–∏:** –≤—Ç—Ä–∞—Ç–∞ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **–í–µ–ª–∏–∫—ñ –≥–∞–ª–µ—Ä–µ—ó:** 1000+ —Ñ–æ—Ç–æ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏
- **–ö–æ–Ω—Ñ–ª—ñ–∫—Ç –∫–µ—à—É:** –æ–¥–Ω–æ—á–∞—Å–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª
- **–ü–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ:** –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ —Ñ–æ—Ç–æ –≤ –∫–µ—à—ñ
- **–ù–µ–≤–∞–ª—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:** –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ API
- **–®–≤–∏–¥–∫—ñ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è:** –º—ñ–∂ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏:** –æ–¥–Ω–æ—á–∞—Å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö

### Performance benchmarks:
- **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ –∫–µ—à–∞:** < 100ms
- **–ü–µ—Ä—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** < 2s –¥–ª—è 50 —Ñ–æ—Ç–æ
- **–°–∫—Ä–æ–ª –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** < 500ms –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö 50 —Ñ–æ—Ç–æ
- **–ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥:** –º–∏—Ç—Ç—î–≤–∏–π –ø–µ—Ä–µ—Ö—ñ–¥
- **–ó–º—ñ–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤:** < 200ms

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):
1. **React Query/SWR** - –∑–∞–º—ñ–Ω–∞ –≤–ª–∞—Å–Ω–æ–≥–æ –∫–µ—à—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É
2. **Service Worker** - –æ—Ñ–ª–∞–π–Ω –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞ background sync
3. **WebP/AVIF** - —Å—É—á–∞—Å–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
4. **Virtual scrolling** - –¥–ª—è –≥–∞–ª–µ—Ä–µ–π –∑ 10k+ —Ñ–æ—Ç–æ
5. **Image optimization** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

### –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:
6. **Advanced search** - –ø–æ—à—É–∫ –ø–æ —Ç–µ–≥–∞–º, –æ–ø–∏—Å–∞–º, –¥–∞—Ç–∞–º
7. **Bulk operations** - –º–∞—Å–æ–≤–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è, –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è, –µ–∫—Å–ø–æ—Ä—Ç
8. **Drag & drop upload** - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ drag & drop
9. **Photo editor** - –±–∞–∑–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è (crop, filters)
10. **Collections** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–ª—å–±–æ–º–∞–º–∏

### –ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (nice-to-have):
11. **AI-powered tagging** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
12. **Photo sharing** - –µ–∫—Å–ø–æ—Ä—Ç —Ç–∞ —ñ–º–ø–æ—Ä—Ç –≥–∞–ª–µ—Ä–µ–π
13. **Advanced filters** - –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º, –æ–±'—î–∫—Ç–∞–º–∏, –µ–º–æ—Ü—ñ—è–º–∏
14. **Collaboration** - —Å–ø—ñ–ª—å–Ω–µ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –≥–∞–ª–µ—Ä–µ–π
15. **Analytics** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—ñ

### –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –±–æ—Ä–≥:
- **Unit tests** - –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏
- **E2E tests** - —Å—Ü–µ–Ω–∞—Ä—ñ—ó –ø–æ–≤–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ —Ñ–ª–æ—É
- **Performance monitoring** - –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- **Accessibility** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –µ–∫—Ä–∞–Ω–Ω–∏—Ö —á–∏—Ç–∞—á—ñ–≤ —Ç–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
- **Type safety** - –ø–æ–≤–Ω–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö edge cases

---

**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** 2.0.0  
**–í–µ—Ä—Å—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** 3.2.0  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** –ì—Ä—É–¥–µ–Ω—å 2025  
**–ê–≤—Ç–æ—Ä:** AnChat Team  
**–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å:** React 18+, Next.js 15+, TypeScript 5+
